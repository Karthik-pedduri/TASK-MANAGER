================================================================================
COMPREHENSIVE API ENDPOINT TESTS
================================================================================
[[94mINFO[0m] Testing GET / (Root/Health Check)...
[[92mPASS[0m] Root endpoint healthy

========================================
TASK CREATION TESTS
========================================
[[94mINFO[0m] Testing POST /tasks/ with valid data...
[[92mPASS[0m] Created valid task (ID: 78)
[[94mINFO[0m] Testing POST /tasks/ with no stages...
[[92mPASS[0m] Created task without stages (ID: 79)
[[94mINFO[0m] Testing POST /tasks/ with missing name (should fail)...
[[92mPASS[0m] Correctly rejected task with missing name
[[94mINFO[0m] Testing POST /tasks/ with invalid priority (should fail)...
[[92mPASS[0m] Correctly rejected invalid priority 'urgent'
[[94mINFO[0m] Testing POST /tasks/ with invalid date format (should fail)...
[[92mPASS[0m] Correctly rejected invalid date format
[[94mINFO[0m] Testing POST /tasks/ with past due date...
[[92mPASS[0m] Created task with past due date (ID: 80) - API allows this
[[94mINFO[0m] Testing POST /tasks/ with very long name (150 chars, DB limit is 100)...
[[92mPASS[0m] DB constraint rejected long name (500) - consider adding Pydantic validation
[[94mINFO[0m] Testing POST /tasks/ with special characters in name...
[[92mPASS[0m] Created task with special chars (ID: 81)
[[94mINFO[0m] Testing POST /tasks/ with template_id...
[[92mPASS[0m] Created task with template (ID: 82)
[[94mINFO[0m] Testing POST /tasks/ with zero estimated_time_hours (should fail)...
[[92mPASS[0m] Correctly rejected zero estimated hours
[[94mINFO[0m] Testing POST /tasks/ with negative estimated_time_hours (should fail)...
[[92mPASS[0m] Correctly rejected negative estimated hours

========================================
TASK RETRIEVAL TESTS
========================================
[[94mINFO[0m] Testing GET /tasks/78...
[[92mPASS[0m] Retrieved task 78 successfully
[[94mINFO[0m] Testing GET /tasks/999999 (should return 404)...
[[92mPASS[0m] Correctly returned 404 for non-existent task
[[94mINFO[0m] Testing GET /tasks/invalid (should fail)...
[[92mPASS[0m] Correctly rejected invalid task ID format
[[94mINFO[0m] Testing GET /tasks/-1 (should fail)...
[[92mPASS[0m] Correctly handled negative task ID
[[94mINFO[0m] Testing GET /tasks/...
[[92mPASS[0m] Listed 55 tasks successfully

========================================
TASK UPDATE TESTS
========================================
[[94mINFO[0m] Testing PATCH /tasks/78 with valid data...
[[92mPASS[0m] Updated task 78 successfully
[[94mINFO[0m] Testing PATCH /tasks/78 with single field...
[[92mPASS[0m] Partial update successful
[[94mINFO[0m] Testing PATCH /tasks/78 with empty payload...
[[92mPASS[0m] Empty payload correctly rejected (needs at least one field)
[[94mINFO[0m] Testing PATCH /tasks/78 with invalid priority...
[[92mPASS[0m] Correctly rejected invalid priority on update
[[94mINFO[0m] Testing PATCH /tasks/78 with past due date...
[[92mPASS[0m] Updated due date to past (may trigger overdue)
[[94mINFO[0m] Testing PATCH /tasks/999999 (should return 404)...
[[92mPASS[0m] Correctly returned 404 for non-existent task

========================================
STAGE UPDATE TESTS
========================================
[[94mINFO[0m] Testing PUT /tasks/stages/100 with valid data...
[[92mPASS[0m] Updated stage 100 successfully
[[94mINFO[0m] Testing PUT /tasks/stages/100 with negative hours...
[[92mPASS[0m] Correctly rejected negative actual hours
[[94mINFO[0m] Testing PUT /tasks/stages/100 with invalid status_state_id...
[[92mPASS[0m] Correctly rejected invalid status_state_id
[[94mINFO[0m] Testing PUT /tasks/stages/999999 (should return 404)...
[[92mPASS[0m] Correctly returned 404 for non-existent stage
[[94mINFO[0m] Testing PUT /tasks/stages with missing status_state_id...
[[92mPASS[0m] Correctly rejected missing status_state_id

========================================
STAGE DELETION TESTS
========================================
[[94mINFO[0m] Creating task with stages for deletion test...
[[94mINFO[0m] Testing DELETE /tasks/stages/108...
[[92mPASS[0m] Deleted stage, 2 stages remaining
[[94mINFO[0m] Testing DELETE /tasks/stages/999999 (should return 404)...
[[92mPASS[0m] Correctly returned 404 for non-existent stage

========================================
ANALYSIS ENDPOINT TESTS
========================================
[[94mINFO[0m] Testing GET /analysis/completion...
[[92mPASS[0m] Completion stats retrieved: ['total_completed', 'avg_duration_days', 'avg_delay_days', 'on_time_percentage', 'by_priority']
[[94mINFO[0m] Testing GET /analysis/overdue...
[[92mPASS[0m] Overdue stats: 7 overdue, 56 total
[[94mINFO[0m] Testing GET /analysis/stage-variance...
[[92mPASS[0m] Stage variance retrieved: ['total_completed_stages', 'avg_variance_hours', 'most_overestimated_stages', 'most_underestimated_stages', 'by_stage_name']
[[94mINFO[0m] Testing GET /analysis/visualizations/priority...
[[92mPASS[0m] Priority pie chart generated successfully
[[94mINFO[0m] Testing GET /analysis/visualizations/completion-trends...
[[92mPASS[0m] Completion trends chart generated
[[94mINFO[0m] Testing GET /analysis/visualizations/delay...
[[92mPASS[0m] Delay chart endpoint working
[[94mINFO[0m] Testing GET /analysis/reports/csv...
[[92mPASS[0m] CSV report generated with 93 lines

========================================
WORKFLOW TESTS
========================================
[[94mINFO[0m] 
=== WORKFLOW TEST: Complete Task Lifecycle ===
[[94mINFO[0m] Workflow: Created task 84
[[92mPASS[0m] Workflow: Task completed successfully after all stages completed
[[92mPASS[0m] Workflow: Analytics updated - 31 completed tasks
[[92mPASS[0m] Workflow: Test completed and cleaned up
[[94mINFO[0m] 
=== WORKFLOW TEST: Overdue Detection ===
[[92mPASS[0m] Overdue workflow: Overdue detection working

========================================
DELETION TESTS (Cleanup)
========================================
[[94mINFO[0m] Testing DELETE /tasks/999999 (should return 404)...
[[92mPASS[0m] Correctly returned 404 for non-existent task
[[94mINFO[0m] Testing DELETE /tasks/86...
[[92mPASS[0m] Deleted task 86 successfully
[[94mINFO[0m] Testing DELETE /tasks/999999 (should return 404)...
[[92mPASS[0m] Correctly returned 404 for non-existent task

================================================================================
TEST SUMMARY
================================================================================
Total Tests: 44
[92mPassed: 44[0m
[91mFailed: 0[0m
Traceback (most recent call last):
  File "D:\xmastasks\TASK MANAGER\tests\comprehensive_api_tests.py", line 886, in <module>
    sys.exit(run_all_tests())
             ^^^^^^^^^^^^^^^
  File "D:\xmastasks\TASK MANAGER\tests\comprehensive_api_tests.py", line 881, in run_all_tests
    print("\n\u2705 All tests passed!")
  File "C:\Users\famil\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2705' in position 2: character maps to <undefined>
